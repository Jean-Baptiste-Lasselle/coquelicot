FROM centos:7

# + le user RocketChat Admin, qui sera utilisé pour créer le user "$UTILISATEUR_ROCKETCHAT_HUBOT" et "$CHATROOM_ROCKETCHAT_HUBOT"
ARG USERNAME_UTILISATEUR_ADMIN_INITIAL=$USERNAME_UTILISATEUR_ADMIN_INITIAL
ENV USERNAME_UTILISATEUR_ADMIN_INITIAL=$USERNAME_UTILISATEUR_ADMIN_INITIAL

ARG MDP_UTILISATEUR_ADMIN_INITIAL=$MDP_UTILISATEUR_ADMIN_INITIAL
ENV MDP_UTILISATEUR_ADMIN_INITIAL=$MDP_UTILISATEUR_ADMIN_INITIAL

# + le user RocketChat, qui sera utilisé pa rle HUBOT, pour s'exprimer sur RocketChat, dans la chatroom "$CHATROOM_ROCKETCHAT_HUBOT"
ARG UTILISATEUR_ROCKETCHAT_HUBOT=jbl
ENV UTILISATEUR_ROCKETCHAT_HUBOT=jbl

ARG UTILISATEUR_ROCKETCHAT_HUBOT_MDP=jbl
ENV UTILISATEUR_ROCKETCHAT_HUBOT_MDP=jbl

ARG UTILISATEUR_ROCKETCHAT_HUBOT_EMAIL=jbl@jbl.io
ENV=UTILISATEUR_ROCKETCHAT_HUBOT_EMAIL=$UTILISATEUR_ROCKETCHAT_HUBOT_EMAIL

ARG CHATROOM_ROCKETCHAT_HUBOT=receptionyooma
ENV CHATROOM_ROCKETCHAT_HUBOT=receptionyooma










































RUN yum update -y && yum install -y vim curl iputils

RUN mkdir -p /marguerite
WORKDIR /marguerite

ADD ./initialiser-rocketchat-pour-hubot .
RUN chmod +x ./initialiser-rocketchat-pour-hubot

CMD ["./initialiser-rocketchat-pour-hubot"]
